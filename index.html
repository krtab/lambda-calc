<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<title>Lambda-calculator</title>
<style>
body {
	width: 80%;
}
#term
{
font-family : Monospace;
background-color: #d2d2e2;
margin-top: 5px;
font-size: 14pt;
}
#prompt {
color:#858585;
}
#resultats
{
	margin-bottom:0px;
	background-color: #e5e5ff;
	padding-bottom: 15px;
	min-height: 400px;
}

.r {
margin-top: 0px;
margin-left:12px;
}
.q {
margin-bottom: 0px;
color: #404040;
}
</style>
</head>

<body>
<h1>Lambda-calc</h1>
<div id="resultats"></div>

<p id="term"><span id='prompt'>&gt;&gt;&gt;</span><span id="input"></span><span style="color: transparent; background-color: #909090;">&nbsp;</span></p>
<textarea name="blblbl" id="capturator" style="left:-1000000;position:absolute;"></textarea>
<script>
$('#term').click(function(){$('#capturator').focus()});
$('#capturator').keydown( function (ev) {
	if (ev.which == 13) {
		quest=$('#input').text();
		var xhr = new XMLHttpRequest();
		xhr.onreadystatechange = function() {
		if (xhr.readyState == 4 && (xhr.status == 200 || xhr.status == 0)) 		
		{
		 
		rep = xhr.response;
	
		$('#resultats').append('<p class="q">'+quest+'</p>');
		$('#resultats').append('<p class="r">'+rep+'</p>');
		$('#input').text('');
		}
		}
		xhr.open("GET", "/lcalcapi?input="+quest);
		xhr.send(null);
}
	else if ( (ev.which >= 65 && ev.which <=90) || ev.which == 190 || ev.which == 110 ||  ev.which == 48 ||  ev.which == 57 ||  ev.which == 8) {
		switch (ev.which){
		case 190:
		$('#input').append('.');
		break;
		case 110:
		$('#input').append('.');
		break;
		case 48:
		$('#input').append(')');
		break;
		case 57:
		$('#input').append('(');
		break
		case 8:
		$('#input').text($('#input').text().slice(0, -1));
		break;
		default:
		$('#input').append(String.fromCharCode(ev.which).toLowerCase());
		break}
}
});


$('#input').css('height', $('#prompt').height());
$('#input').css('width', $('#term').width()-$('#prompt').width()-15);
</script>
</body>
</html>
